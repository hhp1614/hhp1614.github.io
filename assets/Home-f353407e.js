import{r as b,a as V,j as D,l as z,x as m,A as a,u as e,B as H,z as g,E as R,N as U,b as j,O as C,D as q,T as F,F as A,v as f,G as M,H as N,I as B,y as G}from"./@vue-494dff21.js";import{_ as O}from"./Footer.vuevuetypescriptsetuptruelang-a4c46111.js";import{u as J,r as P}from"./index-f459c378.js";import{r as Q}from"./request-470f9b44.js";import{u as W}from"./useAutofocus-8c90add0.js";import"./pinia-2e75a51d.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-7044920f.js";const X=""+new URL("../avatar.svg",import.meta.url).href;function Y(u,i){return Q("/search/engine",{engine:u,word:i})}function Z(){const u=b({name:"google",text:"谷歌",href:"https://www.google.com/search?q="}),i=b([{name:"google",text:"谷歌",tip:"Alt+1",href:"https://www.google.com/search?q="},{name:"baidu",text:"百度",tip:"Alt+2",href:"https://www.baidu.com/s?ie=utf-8&word="},{name:"bing",text:"必应",tip:"Alt+3",href:"https://cn.bing.com/search?q="}]),k=b(!1),l=b(""),o=V({show:!1,data:[],index:-1}),S=s=>{k.value=s},c=s=>{u.value={name:s.name,text:s.text,href:s.href},localStorage.setItem("search-engine",s.name),o.index=-1,p()},r=s=>{const d=s.key;if(s.altKey&&+d<=i.value.length&&+d>0){const T=i.value.find($=>$.tip===`Alt+${d}`);c(T)}},v=()=>{l.value&&(location.href=u.value.href+l.value)},y=localStorage.getItem("search-engine");if(y){const s=i.value.find(d=>d.name===y);s&&(u.value={name:s.name,text:s.text,href:s.href})}const p=async()=>{if(!window.isLocal)return;if(!l.value){o.show=!1,o.data=[];return}o.data=[];const s=await Y(u.value.name,l.value);o.show=!0,o.data=s.data};return{engine:u,engineList:i,engineListShow:k,searchText:l,result:o,toggleEngineList:S,changeEngine:c,shortcutKey:r,search:v,changeText:p,closeResult:()=>{o.show=!1,o.index=-1},arrowToggle:s=>{o.index+=s,o.index>=o.data.length?o.index=0:o.index<0&&(o.index=i.value.length-1),l.value=o.data[o.index]},resultSelect:s=>{l.value=o.data[s],v()}}}const ee={class:"home"},te={class:"nav"},ne=a("div",{class:"avatar"},[a("img",{src:X,alt:"头像",draggable:"false"})],-1),se={class:"search"},oe=["placeholder"],ae={class:"engine-list"},le=["onClick"],ie={class:"name"},re={class:"key-tip"},ue={class:"search-result"},de=["onMousemove","onClick"],xe=D({__name:"Home",setup(u){const i=W(),k=J(),{engine:l,engineList:o,engineListShow:S,searchText:c,result:r,toggleEngineList:v,changeEngine:y,shortcutKey:p,search:h,changeText:L,closeResult:w,arrowToggle:s,resultSelect:d}=Z(),T=window.isLocal;function $(I){k.reset(),P.push("/"+I)}return(I,t)=>{const _=z("Icon");return f(),m(A,null,[a("div",ee,[a("header",null,[a("nav",te,[e(T)?(f(),m("span",{key:0,class:"link",onClick:t[0]||(t[0]=n=>$("admin"))},"管理后台")):H("",!0),a("span",{class:"link",onClick:t[1]||(t[1]=n=>$("toolbox"))},"工具箱")])]),ne,a("div",se,[a("button",{class:"engine",onFocus:t[2]||(t[2]=n=>e(v)(!0)),onBlur:t[3]||(t[3]=n=>e(v)(!1))},[g(_,{name:e(l).name},null,8,["name"])],32),R(a("input",{type:"text",ref_key:"inputRef",ref:i,"onUpdate:modelValue":t[4]||(t[4]=n=>j(c)?c.value=n:null),placeholder:`使用 ${e(l).text} 搜索`,onInput:t[5]||(t[5]=(...n)=>e(L)&&e(L)(...n)),onBlur:t[6]||(t[6]=(...n)=>e(w)&&e(w)(...n)),onFocus:t[7]||(t[7]=n=>e(r).show=!0),onKeydown:[t[8]||(t[8]=(...n)=>e(p)&&e(p)(...n)),t[9]||(t[9]=C((...n)=>e(h)&&e(h)(...n),["enter"])),t[10]||(t[10]=C((...n)=>e(w)&&e(w)(...n),["esc"])),t[11]||(t[11]=C(n=>e(s)(-1),["up"])),t[12]||(t[12]=C(n=>e(s)(1),["down"]))]},null,40,oe),[[U,e(c)]]),a("button",{class:"btn",onClick:t[13]||(t[13]=(...n)=>e(h)&&e(h)(...n))},[g(_,{name:"search"})]),g(F,{name:"slide-fade"},{default:q(()=>[R(a("div",ae,[(f(!0),m(A,null,N(e(o),(n,E)=>(f(),m("div",{key:E,class:"item",onClick:x=>e(y)(n)},[g(_,{name:n.name},null,8,["name"]),a("span",ie,B(n.text),1),a("span",re,B(n.tip),1)],8,le))),128))],512),[[M,e(S)]])]),_:1}),g(F,{name:"slide-fade"},{default:q(()=>{var n;return[R(a("div",ue,[(f(!0),m(A,null,N(e(r).data,(E,x)=>(f(),m("div",{key:x,class:G(["item",{active:x===e(r).index}]),onMousemove:K=>e(r).index=x,onMouseleave:t[14]||(t[14]=K=>e(r).index=-1),onClick:K=>e(d)(x)},B(E),43,de))),128))],512),[[M,e(r).show&&((n=e(r).data)==null?void 0:n.length)]])]}),_:1})])]),g(O)],64)}}});export{xe as default};
