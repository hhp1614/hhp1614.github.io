import{r as y,a as V,k as N,j as z,v as H,z as m,C as a,u as t,D as U,B as g,H as R,P as j,b as G,Q as b,G as M,T as q,F as A,y as f,I as D,J as F,K as B,A as J}from"./@vue-562a0746.js";import{_ as P}from"./Footer.vuevuetypescriptsetuptruelang-a3cd34b3.js";import{u as Q,r as O}from"./index-19f4d83e.js";import{r as W}from"./request-470f9b44.js";import"./pinia-5f9844cc.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-1a8a6996.js";import"./vue-codemirror-559c72df.js";import"./codemirror-ef5f91f8.js";import"./@codemirror-f7e9d6eb.js";import"./@lezer-724c4038.js";import"./crelt-7bb88e1d.js";import"./style-mod-fd510d21.js";import"./w3c-keyname-9fb136d3.js";const X=""+new URL("../avatar.svg",import.meta.url).href;function Y(i,l){return W("/search/engine",{engine:i,word:l})}function Z(){const i=y({name:"google",text:"谷歌",href:"https://www.google.com/search?q="}),l=y([{name:"google",text:"谷歌",tip:"Alt+1",href:"https://www.google.com/search?q="},{name:"baidu",text:"百度",tip:"Alt+2",href:"https://www.baidu.com/s?ie=utf-8&word="},{name:"bing",text:"必应",tip:"Alt+3",href:"https://cn.bing.com/search?q="}]),$=y(!1),r=y(""),o=V({show:!1,data:[],index:-1}),S=s=>{$.value=s},c=s=>{i.value={name:s.name,text:s.text,href:s.href},localStorage.setItem("search-engine",s.name),o.index=-1,v()},u=s=>{const d=s.key;if(s.altKey&&+d<=l.value.length&&+d>0){const T=l.value.find(x=>x.tip===`Alt+${d}`);c(T)}},p=()=>{r.value&&(location.href=i.value.href+r.value)},C=localStorage.getItem("search-engine");if(C){const s=l.value.find(d=>d.name===C);s&&(i.value={name:s.name,text:s.text,href:s.href})}const v=async()=>{if(!window.isLocal)return;if(!r.value){o.show=!1,o.data=[];return}o.data=[];const s=await Y(i.value.name,r.value);o.show=!0,o.data=s.data};return{engine:i,engineList:l,engineListShow:$,searchText:r,result:o,toggleEngineList:S,changeEngine:c,shortcutKey:u,search:p,changeText:v,closeResult:()=>{o.show=!1,o.index=-1},arrowToggle:s=>{o.index+=s,o.index>=o.data.length?o.index=0:o.index<0&&(o.index=l.value.length-1),r.value=o.data[o.index]},resultSelect:s=>{r.value=o.data[s],p()}}}function ee(){const i=y();return N(()=>{var l;(l=i.value)==null||l.focus()}),i}const te={class:"home"},ne={class:"nav"},se=a("div",{class:"avatar"},[a("img",{src:X,alt:"头像",draggable:"false"})],-1),oe={class:"search"},ae=["placeholder"],le={class:"engine-list"},ie=["onClick"],re={class:"name"},ue={class:"key-tip"},de={class:"search-result"},ce=["onMousemove","onClick"],Le=z({__name:"Home",setup(i){const l=ee(),$=Q(),{engine:r,engineList:o,engineListShow:S,searchText:c,result:u,toggleEngineList:p,changeEngine:C,shortcutKey:v,search:h,changeText:L,closeResult:w,arrowToggle:s,resultSelect:d}=Z(),T=window.isLocal;function x(I){$.reset(),O.push("/"+I)}return(I,e)=>{const E=H("Icon");return f(),m(A,null,[a("div",te,[a("header",null,[a("nav",ne,[t(T)?(f(),m("span",{key:0,class:"link",onClick:e[0]||(e[0]=n=>x("admin"))},"管理后台")):U("",!0),a("span",{class:"link",onClick:e[1]||(e[1]=n=>x("toolbox"))},"工具箱"),a("span",{class:"link",onClick:e[2]||(e[2]=n=>x("playground"))},"演练场")])]),se,a("div",oe,[a("button",{class:"engine",onFocus:e[3]||(e[3]=n=>t(p)(!0)),onBlur:e[4]||(e[4]=n=>t(p)(!1))},[g(E,{name:t(r).name},null,8,["name"])],32),R(a("input",{type:"text",ref_key:"inputRef",ref:l,"onUpdate:modelValue":e[5]||(e[5]=n=>G(c)?c.value=n:null),placeholder:`使用 ${t(r).text} 搜索`,onInput:e[6]||(e[6]=(...n)=>t(L)&&t(L)(...n)),onBlur:e[7]||(e[7]=(...n)=>t(w)&&t(w)(...n)),onFocus:e[8]||(e[8]=n=>t(u).show=!0),onKeydown:[e[9]||(e[9]=(...n)=>t(v)&&t(v)(...n)),e[10]||(e[10]=b((...n)=>t(h)&&t(h)(...n),["enter"])),e[11]||(e[11]=b((...n)=>t(w)&&t(w)(...n),["esc"])),e[12]||(e[12]=b(n=>t(s)(-1),["up"])),e[13]||(e[13]=b(n=>t(s)(1),["down"]))]},null,40,ae),[[j,t(c)]]),a("button",{class:"btn",onClick:e[14]||(e[14]=(...n)=>t(h)&&t(h)(...n))},[g(E,{name:"search"})]),g(q,{name:"slide-fade"},{default:M(()=>[R(a("div",le,[(f(!0),m(A,null,F(t(o),(n,_)=>(f(),m("div",{key:_,class:"item",onClick:k=>t(C)(n)},[g(E,{name:n.name},null,8,["name"]),a("span",re,B(n.text),1),a("span",ue,B(n.tip),1)],8,ie))),128))],512),[[D,t(S)]])]),_:1}),g(q,{name:"slide-fade"},{default:M(()=>{var n;return[R(a("div",de,[(f(!0),m(A,null,F(t(u).data,(_,k)=>(f(),m("div",{key:k,class:J(["item",{active:k===t(u).index}]),onMousemove:K=>t(u).index=k,onMouseleave:e[15]||(e[15]=K=>t(u).index=-1),onClick:K=>t(d)(k)},B(_),43,ce))),128))],512),[[D,t(u).show&&((n=t(u).data)==null?void 0:n.length)]])]}),_:1})])]),g(P)],64)}}});export{Le as default};
