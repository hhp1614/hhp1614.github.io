import{_ as N}from"./Footer.vuevuetypescriptsetuptruelang-269c9fd7.js";import{_ as H}from"./Icon.vuevuetypescriptsetuptruelang-5f3c4842.js";import{r as y,a as U,k as j,j as z,A as m,B as a,u as t,C as G,D as g,E as R,F as J,b as O,G as _,H as F,T as I,I as A,y as f,J as q,K as D,L as B,M as P}from"./@vue-b0826c04.js";import{u as Q,r as W}from"./index-192fc86c.js";import{r as X}from"./request-470f9b44.js";import"./pinia-d27202be.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-a796cf7c.js";const Y=""+new URL("../avatar.svg",import.meta.url).href;function Z(i,l){return X("/search/engine",{engine:i,word:l})}function ee(){const i=y({name:"google",text:"谷歌",href:"https://www.google.com/search?q="}),l=y([{name:"google",text:"谷歌",tip:"Alt+1",href:"https://www.google.com/search?q="},{name:"baidu",text:"百度",tip:"Alt+2",href:"https://www.baidu.com/s?ie=utf-8&word="},{name:"bing",text:"必应",tip:"Alt+3",href:"https://cn.bing.com/search?q="}]),$=y(!1),r=y(""),o=U({show:!1,data:[],index:-1}),b=s=>{$.value=s},c=s=>{i.value={name:s.name,text:s.text,href:s.href},localStorage.setItem("search-engine",s.name),o.index=-1,p()},u=s=>{const d=s.key;if(s.altKey&&+d<=l.value.length&&+d>0){const S=l.value.find(x=>x.tip===`Alt+${d}`);c(S)}},v=()=>{r.value&&(location.href=i.value.href+r.value)},C=localStorage.getItem("search-engine");if(C){const s=l.value.find(d=>d.name===C);s&&(i.value={name:s.name,text:s.text,href:s.href})}const p=async()=>{if(!window.isLocal)return;if(!r.value){o.show=!1,o.data=[];return}o.data=[];const s=await Z(i.value.name,r.value);o.show=!0,o.data=s.data};return{engine:i,engineList:l,engineListShow:$,searchText:r,result:o,toggleEngineList:b,changeEngine:c,shortcutKey:u,search:v,changeText:p,closeResult:()=>{o.show=!1,o.index=-1},arrowToggle:s=>{o.index+=s,o.index>=o.data.length?o.index=0:o.index<0&&(o.index=l.value.length-1),r.value=o.data[o.index]},resultSelect:s=>{r.value=o.data[s],v()}}}function te(){const i=y();return j(()=>{var l;(l=i.value)==null||l.focus()}),i}const ne={class:"home"},se={class:"nav"},oe=a("div",{class:"avatar"},[a("img",{src:Y,alt:"头像",draggable:"false"})],-1),ae={class:"search"},le=["placeholder"],ie={class:"engine-list"},re=["onClick"],ue={class:"name"},de={class:"key-tip"},ce={class:"search-result"},me=["onMousemove","onClick"],ye=z({__name:"Home",setup(i){const l=te(),$=Q(),{engine:r,engineList:o,engineListShow:b,searchText:c,result:u,toggleEngineList:v,changeEngine:C,shortcutKey:p,search:h,changeText:L,closeResult:w,arrowToggle:s,resultSelect:d}=ee(),S=window.isLocal;function x(K){$.reset(),W.push("/"+K)}return(K,e)=>{const T=H,V=N;return f(),m(A,null,[a("div",ne,[a("header",null,[a("nav",se,[t(S)?(f(),m("span",{key:0,class:"link",onClick:e[0]||(e[0]=n=>x("admin"))},"管理后台")):G("",!0),a("span",{class:"link",onClick:e[1]||(e[1]=n=>x("toolbox"))},"工具箱"),a("span",{class:"link",onClick:e[2]||(e[2]=n=>x("playground"))},"演练场")])]),oe,a("div",ae,[a("button",{class:"engine",onFocus:e[3]||(e[3]=n=>t(v)(!0)),onBlur:e[4]||(e[4]=n=>t(v)(!1))},[g(T,{name:t(r).name},null,8,["name"])],32),R(a("input",{type:"text",ref_key:"inputRef",ref:l,"onUpdate:modelValue":e[5]||(e[5]=n=>O(c)?c.value=n:null),placeholder:`使用 ${t(r).text} 搜索`,onInput:e[6]||(e[6]=(...n)=>t(L)&&t(L)(...n)),onBlur:e[7]||(e[7]=(...n)=>t(w)&&t(w)(...n)),onFocus:e[8]||(e[8]=n=>t(u).show=!0),onKeydown:[e[9]||(e[9]=(...n)=>t(p)&&t(p)(...n)),e[10]||(e[10]=_((...n)=>t(h)&&t(h)(...n),["enter"])),e[11]||(e[11]=_((...n)=>t(w)&&t(w)(...n),["esc"])),e[12]||(e[12]=_(n=>t(s)(-1),["up"])),e[13]||(e[13]=_(n=>t(s)(1),["down"]))]},null,40,le),[[J,t(c)]]),a("button",{class:"btn",onClick:e[14]||(e[14]=(...n)=>t(h)&&t(h)(...n))},[g(T,{name:"search"})]),g(I,{name:"slide-fade"},{default:F(()=>[R(a("div",ie,[(f(!0),m(A,null,D(t(o),(n,E)=>(f(),m("div",{key:E,class:"item",onClick:k=>t(C)(n)},[g(T,{name:n.name},null,8,["name"]),a("span",ue,B(n.text),1),a("span",de,B(n.tip),1)],8,re))),128))],512),[[q,t(b)]])]),_:1}),g(I,{name:"slide-fade"},{default:F(()=>{var n;return[R(a("div",ce,[(f(!0),m(A,null,D(t(u).data,(E,k)=>(f(),m("div",{key:k,class:P(["item",{active:k===t(u).index}]),onMousemove:M=>t(u).index=k,onMouseleave:e[15]||(e[15]=M=>t(u).index=-1),onClick:M=>t(d)(k)},B(E),43,me))),128))],512),[[q,t(u).show&&((n=t(u).data)==null?void 0:n.length)]])]}),_:1})])]),g(V)],64)}}});export{ye as default};
