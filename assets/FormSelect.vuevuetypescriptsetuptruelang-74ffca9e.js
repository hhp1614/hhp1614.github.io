import{_ as B}from"./Icon.vuevuetypescriptsetuptruelang-5f3c4842.js";import{j as $,r as p,h as I,A as r,B as m,D as y,I as w,N as g,x as V,M as k,H as M,T as A,y as a,E as D,J as E,K as F,L}from"./@vue-b0826c04.js";const N=["tooltip"],T=["placeholder","value"],h=["onClick"],K=["onClick"],H=$({__name:"FormSelect",props:{placeholder:{type:String,default:"请选择"},label:String,clearable:Boolean,modelValue:String,list:{type:Array,default:[{value:""}]}},emits:["update:modelValue","change","clear"],setup(s,{emit:u}){const n=s,v=p(),i=p(!1),d=p(!1),x=I(()=>{var o;return((o=n.list.find(e=>e.value===n.modelValue))==null?void 0:o.label)??""});function C(o){const e=o.target,t=n.list.find(l=>l.label===e.value);u("update:modelValue",t.value)}function c(o){u("update:modelValue",o),u("change",o)}function S(o){const e=n.list.findIndex(t=>t.value===n.modelValue)??0;if(o.key==="Enter")i.value=!1;else if(o.key==="ArrowDown"){const t=e>=n.list.length-1?0:e+1;c(n.list[t].value)}else if(o.key==="ArrowUp"){const t=e<=0?n.list.length-1:e-1;c(n.list[t].value)}}function b(){u("update:modelValue",""),u("clear")}return(o,e)=>{const t=B;return a(),r("div",{class:"form-item",onClick:e[6]||(e[6]=(...l)=>v.value.focus&&v.value.focus(...l)),onMouseover:e[7]||(e[7]=l=>d.value=!0),onMouseleave:e[8]||(e[8]=l=>d.value=!1)},[m("div",{class:"prefix",tooltip:s.label},[y(t,{name:"pencil"})],8,N),m("input",{ref_key:"inputRef",ref:v,placeholder:s.placeholder,value:x.value||s.modelValue,onFocus:e[0]||(e[0]=l=>i.value=!0),onBlur:e[1]||(e[1]=l=>i.value=!1),onInput:e[2]||(e[2]=l=>C(l)),onKeydown:e[3]||(e[3]=l=>S(l)),readonly:""},null,40,T),s.clearable?(a(),r(w,{key:0},[d.value?(a(),r("span",{key:0,class:"close",onClick:g(b,["stop"])},"×",8,h)):(a(),V(t,{key:1,class:k(["collapse",{open:i.value}]),name:"arrow-down"},null,8,["class"]))],64)):(a(),V(t,{key:1,class:k(["collapse",{open:i.value}]),name:"arrow-down"},null,8,["class"])),y(A,{name:"slide-fade"},{default:M(()=>[D(m("div",{class:"select-list",onTest:c,onClick:e[4]||(e[4]=l=>l.stopPropagation()),onMouseover:e[5]||(e[5]=g(l=>d.value=!1,["stop"]))},[(a(!0),r(w,null,F(s.list,({label:l,value:f})=>(a(),r("div",{key:f,class:k(["select-option",{selected:f===s.modelValue}]),onClick:R=>c(f)},L(l||f),11,K))),128))],544),[[E,i.value]])]),_:1})],32)}}});export{H as _};
