import{j as v,a as y,r as g,l as p,x as w,A as c,z as d,D as C,v as k}from"./@vue-c550c1ff.js";const T="http://localhost/homepage";async function m(e,t={}){return(await fetch(T+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}function z(e){return m("/history/all",e)}function x(e){return m("/history/remove",{id:e})}function V(e,t="info",i=2){const l=document.querySelector(".toast");l&&l.remove();const a=200,o=document.createElement("div");return o.className=`toast ${t}`,o.style.animation=`toast-in ${a}ms`,o.innerText=e,document.body.appendChild(o),setTimeout(()=>{o.style.animation=`toast-out ${a}ms forwards`,setTimeout(()=>o.remove(),a)},i*1e3),!0}const $={class:"history-list"},D={class:"form"},N={class:"content"},j=["onClick"],q=["onClick"],H=v({__name:"HistoryList",setup(e){const t=y({title:"",page:1,size:28,total:0}),i=[{prop:"title",label:"标题"},{prop:"scheme",label:"协议",width:50},{prop:"host",label:"域名",width:120},{prop:"port",label:"端口",width:50},{prop:"path",label:"路径"},{prop:"query",label:"查询参数"},{prop:"fragment",label:"锚点"},{prop:"create_ts",label:"创建时间",width:140},{prop:"action",label:"操作",width:80,slot:!0}],l=g([]);async function a(s){s&&(t.page=s);const n=await z({page:t.page,size:t.size});l.value=n.data.data,t.page=n.data.current_page,t.total=n.data.total}function o(s){window.open(s,"_blank")}async function u(s){(await x(s)).status&&V("删除成功","success")&&a()}return a(),(s,n)=>{const _=p("FormInput"),h=p("DataTable"),f=p("Paginate");return k(),w("div",$,[c("div",D,[d(_,{modelValue:t.title,"onUpdate:modelValue":n[0]||(n[0]=r=>t.title=r),label:"标题",clearable:""},null,8,["modelValue"])]),c("div",N,[d(h,{cols:i,data:l.value},{action:C(({row:r})=>[c("span",{class:"link",onClick:b=>o(r.url)},"访问",8,j),c("span",{class:"link",onClick:b=>u(r.id)},"删除",8,q)]),_:1},8,["data"]),d(f,{page:t.page,size:t.size,total:t.total,onChange:a},null,8,["page","size","total"])])])}}});export{H as default};
