import{j as $,a as V,r as g,l as r,x as d,A as n,z as s,O as p,D as m,F as y,v as b,H,I as C}from"./@vue-494dff21.js";import{g as P,r as L}from"./history-978854bf.js";import{t as S}from"./request-470f9b44.js";const N={class:"history-list"},T={class:"form"},j={class:"content"},q=["onClick"],A=["onClick"],E=["onClick"],O={class:"wrap"},G={width:"80"},W=$({__name:"HistoryList",setup(J){const k=[{value:"http"},{value:"https"}],t=V({title:"",scheme:"",host:"",port:"",page:1,size:28,ts:""}),D=[{prop:"title",label:"标题"},{prop:"scheme",label:"协议",width:50},{prop:"host",label:"域名",width:200},{prop:"port",label:"端口",width:50},{prop:"create_ts",label:"创建时间",width:140},{prop:"action",label:"操作",width:105,slot:!0}],v=g([]),_=g(0),i=V({visible:!1,title:"",row:{},data:[]});async function o(a){typeof a=="number"&&(t.page=a);const e=await P(t);v.value=e.data.data,t.page=e.data.current_page,_.value=e.data.total}function f(a){window.open(a,"_blank")}function K(a){i.visible=!0,i.row=a,i.data=[{label:"标题",value:a.title},{label:"协议",value:a.scheme},{label:"域名",value:a.host},{label:"端口",value:a.port},{label:"路径",value:a.path},{label:"查询参数",value:a.query},{label:"锚点",value:a.fragment},{label:"创建时间",value:a.create_ts},{label:"链接",value:a.url}]}async function F(a){if(!confirm("确定删除吗?"))return;(await L(a)).status&&S("删除成功","success")&&o()}function I(){t.title="",t.scheme="",t.host="",t.port="",o()}return o(),(a,e)=>{const c=r("FormInput"),U=r("FormSelect"),w=r("DatePicker"),h=r("BtnIcon"),x=r("DataTable"),z=r("Paginate"),B=r("Dialog");return b(),d(y,null,[n("div",N,[n("div",T,[s(c,{modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=l=>t.title=l),class:"full",label:"标题",onKeypress:p(o,["enter"]),onClear:o,clearable:""},null,8,["modelValue","onKeypress"]),s(U,{modelValue:t.scheme,"onUpdate:modelValue":e[1]||(e[1]=l=>t.scheme=l),label:"协议",list:k,placeholder:"选择协议",onChange:e[2]||(e[2]=l=>o()),onClear:o,clearable:""},null,8,["modelValue"]),s(c,{modelValue:t.host,"onUpdate:modelValue":e[3]||(e[3]=l=>t.host=l),class:"full",label:"域名",onKeypress:p(o,["enter"]),onClear:o,clearable:""},null,8,["modelValue","onKeypress"]),s(c,{modelValue:t.port,"onUpdate:modelValue":e[4]||(e[4]=l=>t.port=l),type:"number",label:"端口",onKeypress:p(o,["enter"]),onClear:o,clearable:""},null,8,["modelValue","onKeypress"]),s(w,{modelValue:t.ts,"onUpdate:modelValue":e[5]||(e[5]=l=>t.ts=l),label:"创建时间",onKeypress:p(o,["enter"]),onClear:o,clearable:""},null,8,["modelValue","onKeypress"]),s(h,{icon:"search",tooltip:"查询",onClick:o}),s(h,{icon:"clear",onClick:I})]),n("div",j,[s(x,{cols:D,data:v.value},{action:m(({row:l})=>[n("span",{class:"link",onClick:u=>f(l.url)},"打开",8,q),n("span",{class:"link",onClick:u=>K(l)},"详情",8,A),n("span",{class:"link",onClick:u=>F(l.id)},"删除",8,E)]),_:1},8,["data"]),s(z,{page:t.page,size:t.size,total:_.value,onChange:o},null,8,["page","size","total"])])]),s(B,{title:"详情",modelValue:i.visible,"onUpdate:modelValue":e[7]||(e[7]=l=>i.visible=l)},{action:m(()=>[n("button",{onClick:e[6]||(e[6]=l=>f(i.row.url))},"打开链接")]),default:m(()=>[n("table",O,[(b(!0),d(y,null,H(i.data,({label:l,value:u})=>(b(),d("tr",null,[n("td",G,C(l),1),n("td",null,C(u),1)]))),256))])]),_:1},8,["modelValue"])],64)}}});export{W as default};
