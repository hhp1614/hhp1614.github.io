import{r as k,a as V,k as N,j as z,v as H,z as m,C as a,u as e,D as U,B as g,H as R,P as j,b as G,Q as b,G as M,T as q,F as A,y as f,I as D,J as F,K as B,A as J}from"./@vue-562a0746.js";import{_ as P}from"./Footer.vuevuetypescriptsetuptruelang-a3cd34b3.js";import{u as Q,r as O}from"./index-09e20a2e.js";import{r as W}from"./request-470f9b44.js";import"./pinia-5f9844cc.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-1a8a6996.js";import"./vue-codemirror-559c72df.js";import"./codemirror-ef5f91f8.js";import"./@codemirror-f7e9d6eb.js";import"./@lezer-724c4038.js";import"./crelt-7bb88e1d.js";import"./style-mod-fd510d21.js";import"./w3c-keyname-9fb136d3.js";const X=""+new URL("../avatar.svg",import.meta.url).href;function Y(l,i){return W("/search/engine",{engine:l,word:i})}function Z(){const l=k({name:"google",text:"谷歌",href:"https://www.google.com/search?q="}),i=k([{name:"google",text:"谷歌",tip:"Alt+1",href:"https://www.google.com/search?q="},{name:"baidu",text:"百度",tip:"Alt+2",href:"https://www.baidu.com/s?ie=utf-8&word="},{name:"bing",text:"必应",tip:"Alt+3",href:"https://cn.bing.com/search?q="}]),y=k(!1),r=k(""),o=V({show:!1,data:[],index:-1}),S=s=>{y.value=s},c=s=>{l.value={name:s.name,text:s.text,href:s.href},localStorage.setItem("search-engine",s.name),o.index=-1,p()},u=s=>{const d=s.key;if(s.altKey&&+d<=i.value.length&&+d>0){const T=i.value.find(C=>C.tip===`Alt+${d}`);c(T)}},v=()=>{r.value&&(location.href=l.value.href+r.value)},$=localStorage.getItem("search-engine");if($){const s=i.value.find(d=>d.name===$);s&&(l.value={name:s.name,text:s.text,href:s.href})}const p=async()=>{if(!window.isLocal)return;if(!r.value){o.show=!1,o.data=[];return}o.data=[];const s=await Y(l.value.name,r.value);o.show=!0,o.data=s.data};return{engine:l,engineList:i,engineListShow:y,searchText:r,result:o,toggleEngineList:S,changeEngine:c,shortcutKey:u,search:v,changeText:p,closeResult:()=>{o.show=!1,o.index=-1},arrowToggle:s=>{o.index+=s,o.index>=o.data.length?o.index=0:o.index<0&&(o.index=i.value.length-1),r.value=o.data[o.index]},resultSelect:s=>{r.value=o.data[s],v()}}}function ee(){const l=k();return N(()=>{var i;(i=l.value)==null||i.focus()}),l}const te={class:"home"},ne={class:"nav"},se=a("div",{class:"avatar"},[a("img",{src:X,alt:"头像",draggable:"false"})],-1),oe={class:"search"},ae=["placeholder"],ie={class:"engine-list"},le=["onClick"],re={class:"name"},ue={class:"key-tip"},de={class:"search-result"},ce=["onMousemove","onClick"],Le=z({__name:"Home",setup(l){const i=ee(),y=Q(),{engine:r,engineList:o,engineListShow:S,searchText:c,result:u,toggleEngineList:v,changeEngine:$,shortcutKey:p,search:h,changeText:L,closeResult:w,arrowToggle:s,resultSelect:d}=Z(),T=window.isLocal;function C(I){y.reset(),O.push("/"+I)}return(I,t)=>{const _=H("Icon");return f(),m(A,null,[a("div",te,[a("header",null,[a("nav",ne,[e(T)?(f(),m("span",{key:0,class:"link",onClick:t[0]||(t[0]=n=>C("admin"))},"管理后台")):U("",!0),a("span",{class:"link",onClick:t[1]||(t[1]=n=>C("toolbox"))},"工具箱")])]),se,a("div",oe,[a("button",{class:"engine",onFocus:t[2]||(t[2]=n=>e(v)(!0)),onBlur:t[3]||(t[3]=n=>e(v)(!1))},[g(_,{name:e(r).name},null,8,["name"])],32),R(a("input",{type:"text",ref_key:"inputRef",ref:i,"onUpdate:modelValue":t[4]||(t[4]=n=>G(c)?c.value=n:null),placeholder:`使用 ${e(r).text} 搜索`,onInput:t[5]||(t[5]=(...n)=>e(L)&&e(L)(...n)),onBlur:t[6]||(t[6]=(...n)=>e(w)&&e(w)(...n)),onFocus:t[7]||(t[7]=n=>e(u).show=!0),onKeydown:[t[8]||(t[8]=(...n)=>e(p)&&e(p)(...n)),t[9]||(t[9]=b((...n)=>e(h)&&e(h)(...n),["enter"])),t[10]||(t[10]=b((...n)=>e(w)&&e(w)(...n),["esc"])),t[11]||(t[11]=b(n=>e(s)(-1),["up"])),t[12]||(t[12]=b(n=>e(s)(1),["down"]))]},null,40,ae),[[j,e(c)]]),a("button",{class:"btn",onClick:t[13]||(t[13]=(...n)=>e(h)&&e(h)(...n))},[g(_,{name:"search"})]),g(q,{name:"slide-fade"},{default:M(()=>[R(a("div",ie,[(f(!0),m(A,null,F(e(o),(n,E)=>(f(),m("div",{key:E,class:"item",onClick:x=>e($)(n)},[g(_,{name:n.name},null,8,["name"]),a("span",re,B(n.text),1),a("span",ue,B(n.tip),1)],8,le))),128))],512),[[D,e(S)]])]),_:1}),g(q,{name:"slide-fade"},{default:M(()=>{var n;return[R(a("div",de,[(f(!0),m(A,null,F(e(u).data,(E,x)=>(f(),m("div",{key:x,class:J(["item",{active:x===e(u).index}]),onMousemove:K=>e(u).index=x,onMouseleave:t[14]||(t[14]=K=>e(u).index=-1),onClick:K=>e(d)(x)},B(E),43,ce))),128))],512),[[D,e(u).show&&((n=e(u).data)==null?void 0:n.length)]])]}),_:1})])]),g(P)],64)}}});export{Le as default};
