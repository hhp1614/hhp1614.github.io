import{j as b,r as x,h as g,l as k,q as r,y as u,B as o,G as T,H as f,u as n,A as p,x as m,z as C,L as y,I as $,N as h}from"./@vue-b15b3ec4.js";import{b as N}from"./index-d6f30692.js";import"./pinia-3eeae971.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-56647813.js";const B={class:"json has-tabs"},J={class:"tabs"},S=["onBlur","onClick"],I=["onClick"],j={class:"actions"},H={class:"input"},L={class:"output"},M={class:"content"},w=["value"],z={class:"output"},E=["innerHTML"],D=b({__name:"Json",setup(O){const c=x(),e=N();function d(i,t=!1){if(!i)return"";try{return JSON.stringify(JSON.parse(i),null,t?0:4)}catch{return"Error: is not valid JSON"}}const _=g(()=>d(e.activeTabText).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){let a="number";return/^"/.test(t)?/:$/.test(t)?a="key":a="string":/true|false/.test(t)?a="boolean":/null/.test(t)&&(a="null"),`<span class="${a}">${t}</span>`}));return k(()=>{var i;(i=c.value)==null||i.focus()}),(i,t)=>{const a=m("Icon"),v=m("Copy");return r(),u("div",B,[o("nav",J,[(r(!0),u(T,null,f(n(e).tabs,s=>(r(),u("div",{class:C(["item",{active:s.id===n(e).activeTabId}]),key:s.id},[o("span",{class:"title",onBlur:l=>n(e).changeTabName(s.id,s.title,l.target.innerText),onKeydown:t[0]||(t[0]=y(l=>l.target.blur(),["enter"])),onClick:l=>n(e).changeTab(s.id),contenteditable:""},$(s.title),41,S),o("span",{class:"close",onClick:h(l=>n(e).removeTab(s.id),["stop"]),tooltip:"关闭标签"},"×",8,I)],2))),128)),o("div",{class:"item",onClick:t[1]||(t[1]=s=>n(e).addTab(c.value)),tooltip:"添加标签"},[p(a,{name:"plus"})]),o("div",{class:"item",onClick:t[2]||(t[2]=s=>n(e).clearTab(c.value)),tooltip:"清空标签"},[p(a,{name:"clear"})])]),o("div",j,[o("div",H,[p(v,{text:n(e).activeTabText},null,8,["text"]),o("button",{onClick:t[3]||(t[3]=s=>n(e).changeTabText(d(n(e).activeTabText)))},"格式化"),o("button",{onClick:t[4]||(t[4]=s=>n(e).changeTabText(d(n(e).activeTabText,!0)))},"压缩")]),o("div",L,[p(v,{text:d(n(e).activeTabText)},null,8,["text"])])]),o("div",M,[o("textarea",{class:"input",ref_key:"inputRef",ref:c,value:n(e).activeTabText,onInput:t[5]||(t[5]=s=>n(e).changeTabText(s.target.value))},null,40,w),o("div",z,[(r(!0),u(T,null,f(n(_).split(`
`),s=>(r(),u("div",{class:"code-text",innerHTML:s},null,8,E))),256))])])])}}});export{D as default};
