import{_ as $}from"./Icon.vuevuetypescriptsetuptruelang-5f3c4842.js";import{j as I,r as v,h as M,A as d,B as k,D as w,u as a,I as g,N as V,x,M as y,H as A,T as D,y as i,E,J as F,K as L,L as N}from"./@vue-b0826c04.js";const T=["tooltip"],h=["placeholder","value"],K=["onClick"],R=["onClick"],J=I({__name:"FormSelect",props:{placeholder:{type:String,default:"请选择"},label:String,clearable:Boolean,modelValue:String,list:{type:Array,default:[{value:""}]}},emits:["update:modelValue","change","clear"],setup(s,{emit:u}){const n=s,m=v(),r=v(!1),c=v(!1),C=M(()=>{var o;return((o=n.list.find(e=>e.value===n.modelValue))==null?void 0:o.label)??""});function S(o){const e=o.target,t=n.list.find(l=>l.label===e.value);u("update:modelValue",t.value)}function f(o){u("update:modelValue",o),u("change",o)}function b(o){const e=n.list.findIndex(t=>t.value===n.modelValue)??0;if(o.key==="Enter")r.value=!1;else if(o.key==="ArrowDown"){const t=e>=n.list.length-1?0:e+1;f(n.list[t].value)}else if(o.key==="ArrowUp"){const t=e<=0?n.list.length-1:e-1;f(n.list[t].value)}}function B(){u("update:modelValue",""),u("clear")}return(o,e)=>{const t=$;return i(),d("div",{class:"form-item",onClick:e[6]||(e[6]=(...l)=>a(m).focus&&a(m).focus(...l)),onMouseover:e[7]||(e[7]=l=>c.value=!0),onMouseleave:e[8]||(e[8]=l=>c.value=!1)},[k("div",{class:"prefix",tooltip:s.label},[w(t,{name:"pencil"})],8,T),k("input",{ref_key:"inputRef",ref:m,placeholder:s.placeholder,value:a(C)||s.modelValue,onFocus:e[0]||(e[0]=l=>r.value=!0),onBlur:e[1]||(e[1]=l=>r.value=!1),onInput:e[2]||(e[2]=l=>S(l)),onKeydown:e[3]||(e[3]=l=>b(l)),readonly:""},null,40,h),s.clearable?(i(),d(g,{key:0},[a(c)?(i(),d("span",{key:0,class:"close",onClick:V(B,["stop"])},"×",8,K)):(i(),x(t,{key:1,class:y(["collapse",{open:a(r)}]),name:"arrow-down"},null,8,["class"]))],64)):(i(),x(t,{key:1,class:y(["collapse",{open:a(r)}]),name:"arrow-down"},null,8,["class"])),w(D,{name:"slide-fade"},{default:A(()=>[E(k("div",{class:"select-list",onTest:f,onClick:e[4]||(e[4]=l=>l.stopPropagation()),onMouseover:e[5]||(e[5]=V(l=>c.value=!1,["stop"]))},[(i(!0),d(g,null,L(s.list,({label:l,value:p})=>(i(),d("div",{key:p,class:y(["select-option",{selected:p===s.modelValue}]),onClick:j=>f(p)},N(l||p),11,R))),128))],544),[[F,a(r)]])]),_:1})],32)}}});export{J as _};
