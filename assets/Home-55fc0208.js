import{r as T,a as N,j as V,l as D,x as m,A as a,u as e,B as z,z as g,E as R,N as U,b as j,O as b,D as K,T as M,F as A,v as f,G as q,H as F,I as H,y as G}from"./@vue-494dff21.js";import{_ as O}from"./Footer.vuevuetypescriptsetuptruelang-a4c46111.js";import{u as J,r as P}from"./index-66b15dd9.js";import{r as Q}from"./request-470f9b44.js";import{u as W}from"./useAutofocus-8c90add0.js";import"./pinia-2e75a51d.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-7044920f.js";const X=""+new URL("../avatar.svg",import.meta.url).href;function Y(i,r){return Q("/search/engine",{engine:i,word:r})}function Z(){const i=T({name:"google",text:"谷歌",href:"https://www.google.com/search?q="}),r=T([{name:"google",text:"谷歌",tip:"Alt+1",href:"https://www.google.com/search?q="},{name:"baidu",text:"百度",tip:"Alt+2",href:"https://www.baidu.com/s?ie=utf-8&word="},{name:"bing",text:"必应",tip:"Alt+3",href:"https://cn.bing.com/search?q="}]),k=T(!1),l=T(""),o=N({show:!1,data:[],index:-1}),C=s=>{k.value=s},c=s=>{i.value={name:s.name,text:s.text,href:s.href},localStorage.setItem("search-engine",s.name),o.index=-1,p()},u=s=>{const d=s.key;if(s.altKey&&s.key==="Enter"&&l.value)return window.open(i.value.href+l.value);if(s.altKey&&+d<=r.value.length&&+d>0){const S=r.value.find($=>$.tip===`Alt+${d}`);c(S)}},v=()=>{l.value&&(location.href=i.value.href+l.value)},y=localStorage.getItem("search-engine");if(y){const s=r.value.find(d=>d.name===y);s&&(i.value={name:s.name,text:s.text,href:s.href})}const p=async()=>{if(!l.value){o.show=!1,o.data=[];return}o.data=[];const s=await Y(i.value.name,l.value);o.show=!0,o.data=s.data};return{engine:i,engineList:r,engineListShow:k,searchText:l,result:o,toggleEngineList:C,changeEngine:c,shortcutKey:u,search:v,changeText:p,closeResult:()=>{o.show=!1,o.index=-1},arrowToggle:s=>{o.index+=s,o.index>=o.data.length?o.index=0:o.index<0&&(o.index=r.value.length-1),l.value=o.data[o.index]},resultSelect:s=>{l.value=o.data[s],v()}}}const ee={class:"home"},te={class:"nav"},ne=a("div",{class:"avatar"},[a("img",{src:X,alt:"头像",draggable:"false"})],-1),se={class:"search"},oe=["placeholder"],ae={class:"engine-list"},le=["onClick"],ie={class:"name"},re={class:"key-tip"},ue={class:"search-result"},de=["innerHTML","onMousemove","onClick"],xe=V({__name:"Home",setup(i){const r=W(),k=J(),{engine:l,engineList:o,engineListShow:C,searchText:c,result:u,toggleEngineList:v,changeEngine:y,shortcutKey:p,search:h,changeText:L,closeResult:w,arrowToggle:s,resultSelect:d}=Z(),S=window.isLocal;function $(B){k.reset(),P.push("/"+B)}return(B,t)=>{const E=D("Icon");return f(),m(A,null,[a("div",ee,[a("header",null,[a("nav",te,[e(S)?(f(),m("span",{key:0,class:"link",onClick:t[0]||(t[0]=n=>$("admin"))},"管理后台")):z("",!0),a("span",{class:"link",onClick:t[1]||(t[1]=n=>$("toolbox"))},"工具箱")])]),ne,a("div",se,[a("button",{class:"engine",onFocus:t[2]||(t[2]=n=>e(v)(!0)),onBlur:t[3]||(t[3]=n=>e(v)(!1))},[g(E,{name:e(l).name},null,8,["name"])],32),R(a("input",{type:"text",ref_key:"inputRef",ref:r,"onUpdate:modelValue":t[4]||(t[4]=n=>j(c)?c.value=n:null),placeholder:`使用 ${e(l).text} 搜索`,onInput:t[5]||(t[5]=(...n)=>e(L)&&e(L)(...n)),onBlur:t[6]||(t[6]=(...n)=>e(w)&&e(w)(...n)),onFocus:t[7]||(t[7]=n=>e(u).show=!0),onKeydown:[t[8]||(t[8]=(...n)=>e(p)&&e(p)(...n)),t[9]||(t[9]=b((...n)=>e(h)&&e(h)(...n),["enter"])),t[10]||(t[10]=b((...n)=>e(w)&&e(w)(...n),["esc"])),t[11]||(t[11]=b(n=>e(s)(-1),["up"])),t[12]||(t[12]=b(n=>e(s)(1),["down"]))]},null,40,oe),[[U,e(c)]]),a("button",{class:"btn",onClick:t[13]||(t[13]=(...n)=>e(h)&&e(h)(...n))},[g(E,{name:"search"})]),g(M,{name:"slide-fade"},{default:K(()=>[R(a("div",ae,[(f(!0),m(A,null,F(e(o),(n,_)=>(f(),m("div",{key:_,class:"item",onClick:x=>e(y)(n)},[g(E,{name:n.name},null,8,["name"]),a("span",ie,H(n.text),1),a("span",re,H(n.tip),1)],8,le))),128))],512),[[q,e(C)]])]),_:1}),g(M,{name:"slide-fade"},{default:K(()=>{var n;return[R(a("div",ue,[(f(!0),m(A,null,F(e(u).data,(_,x)=>(f(),m("div",{key:x,class:G(["item",{active:x===e(u).index}]),innerHTML:_,onMousemove:I=>e(u).index=x,onMouseleave:t[14]||(t[14]=I=>e(u).index=-1),onClick:I=>e(d)(x)},null,42,de))),128))],512),[[q,e(u).show&&((n=e(u).data)==null?void 0:n.length)]])]}),_:1})])]),g(O)],64)}}});export{xe as default};
