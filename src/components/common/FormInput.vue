<script lang="ts" setup>
import { ref } from 'vue';

defineProps({
    type: String,
    placeholder: String,
    label: String,
    readonly: Boolean,
    clearable: Boolean,
    modelValue: String, // 'v-model' must be use 'modelValue'
});

const emit = defineEmits<{
    (e: 'update:modelValue', value: string): void;
}>();

const inputRef = ref();

function handleInput(e: Event) {
    const target = e.target as HTMLInputElement;
    emit('update:modelValue', target.value);
}

function clearInput() {
    emit('update:modelValue', '');
}
</script>

<template>
    <div class="form-item" @click="() => inputRef.focus()">
        <div class="prefix" :tooltip="label">
            <Icon name="pencil" />
        </div>
        <input ref="inputRef" :type="type" :placeholder="placeholder" :readonly="readonly" :value="modelValue" @input="handleInput($event)" />
        <span v-if="clearable" class="close" @click="clearInput">Ã—</span>
    </div>
</template>
